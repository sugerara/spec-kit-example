```markdown
# 機能仕様: タスク管理アプリ (001-build-a-task)

**Feature Branch**: `001-build-a-task`
**作成日**: 2025-10-05
**ステータス**: Draft
**入力**: ユーザー記述: "Build a task management app with user authentication, real-time collaboration, and mobile support. Users should be able to create projects, assign tasks, and track progress with Kanban boards."

## 実行フロー（main）
```
1. 入力からユーザー記述を解析する
   → もし空なら: ERROR "No feature description provided"
2. 記述から主要な概念を抽出する
   → 抽出項目: アクター、アクション、データ、制約
3. 不明点ごとに:
   → [NEEDS CLARIFICATION: specific question] を付ける
4. ユーザーシナリオとテストセクションを埋める
   → ユーザーフローが不明瞭なら: ERROR "Cannot determine user scenarios"
5. 機能要件を生成する
   → 各要件はテスト可能であること
   → 曖昧な要件はマークする
6. 主要エンティティを特定する（データが関与する場合）
7. レビューチェックリストを実行する
   → [NEEDS CLARIFICATION] が残る場合: WARN "Spec has uncertainties"
   → 実装詳細が混入している場合: ERROR "Remove tech details"
8. 返却: SUCCESS（計画フェーズ準備完了）
```

---

## ⚡ クイックガイド
- ✅ ユーザーが何を必要としているか（WHAT）とその理由（WHY）に集中する
- ❌ 実装方法（HOW）を含めない（言語、フレームワーク、API 等）
- 👥 ビジネス関係者向けの記述にする（開発者向けではない）

### セクション要件
- **必須セクション**: すべての機能で完成させること
- **任意セクション**: 関連する場合のみ含めること
- 該当しないセクションは完全に削除する（"N/A" のまま残さない）

### AI 生成時の注意
1. **すべての曖昧さをマーク**: 前提が必要な箇所は [NEEDS CLARIFICATION: specific question] を使用する
2. **憶測しない**: 認証方式など指定されていない場合は仮定せずマークする
3. **テスター視点**: 曖昧な要件は "テスト可能か" のチェックに落ちるべき
4. **よく曖昧になりやすい領域**:
   - ユーザーロールと権限
   - データ保持・プライバシー方針
   - スケール・性能目標
   - モバイルのオフラインサポート要件
   - セキュリティ／コンプライアンス（SSO、OAuth、2FA 等）

---

## ユーザーシナリオとテスト（必須）

### 主要なユーザーストーリー
ユーザーとして、プロジェクトを作成し、タスクを追加・割り当て、Kanban ボードで進捗を追跡
したい。こうしてチームは Web とモバイルクライアント間でリアルタイムに作業を調整できる。

### 受け入れシナリオ
1. **前提**: 認証済みのユーザーがいる。**操作**: 新しいプロジェクトを作成する。**期待**: プロジェクトが作成され、招待された協力者に表示される。
2. **前提**: プロジェクトメンバーがいる。**操作**: タスクを作成または割り当てる。**期待**: タスクがプロジェクトのデフォルト Kanban ボードに表示され、割り当てられたユーザーに通知が届く。
3. **前提**: 複数の協力者がいる。**操作**: あるユーザーがカードを移動する。**期待**: 他の協力者がリアルタイムで更新を確認できる。

### エッジケース
- モバイルでボード編集中にネットワーク切断が発生した場合: 編集はキューに入り、接続回復時に同期されるべき [NEEDS CLARIFICATION: オフライン競合解決ポリシー].
- 非メンバーへのタスク再割り当て: 操作は拒否され、明確なエラーメッセージを返すこと。
- タスク数が 10k を超える大規模プロジェクト: ページングやフィルタリングの挙動を定義する必要がある [NEEDS CLARIFICATION: スケール期待値].

## 要件（必須）

### 機能要件
- **FR-001**: ユーザーが登録および認証（サインアップ、サインイン）できること。
- **FR-002**: ユーザーがプロジェクトを作成し、協力者を招待できること。
- **FR-003**: タイトル、説明、担当者、ラベル、期限、ステータス列を含むタスクを作成できること。
- **FR-004**: 各プロジェクトに Kanban ボードを提供し、タスクの列間移動と列内の順序付けをサポートすること。
- **FR-005**: ボードの変更について接続中のすべての協力者にリアルタイム更新を配信すること。
- **FR-006**: アクセス制御をサポートすること（プロジェクトメンバー、ゲスト、管理者の区別）。
- **FR-007**: モバイルサポート（レスポンシブ UI またはネイティブクライアント）を提供し、断続的な接続に対処すること。
- **FR-008**: タスク割り当て、メンション、ステータス変更に関する通知を提供すること。

- *不明点 / Phase 0 で解決が必要な項目:*
- **FR-009**: 認証方式（メール/パスワード、OAuth、SSO 等） [NEEDS CLARIFICATION]
- **FR-010**: モバイル編集のオフライン競合解決ポリシー [NEEDS CLARIFICATION]
- **FR-011**: リアルタイム更新のパフォーマンス目標と許容レイテンシ [NEEDS CLARIFICATION]

### 主要エンティティ（データが関与する場合）
- **User**: id, name, email, avatar, roles, preferences
- **Project**: id, name, description, owner_id, member_ids, settings
- **Task**: id, project_id, title, description, assignee_ids, labels, due_date, status_column, position
- **Board**: project_id, columns (ordered), column metadata
- **Notification**: id, user_id, type, payload, read

---

## レビュー & 受け入れチェックリスト
### コンテンツ品質
- [ ] 実装の詳細（言語、フレームワーク、API）を含まないこと
- [ ] ユーザー価値とビジネスニーズに焦点を当てていること
- [ ] 非技術系ステークホルダー向けに書かれていること
- [ ] すべての必須セクションが完成していること

### 要件の完全性
- [ ] [NEEDS CLARIFICATION] マーカーが残っていない（または Phase 0 用に捕捉されている）
- [ ] 要件がテスト可能で曖昧でないこと
- [ ] 成功基準が測定可能であること
- [ ] スコープが明確に定義されていること
- [ ] 依存関係と前提が特定されていること

---

## 実行状況
- [x] ユーザー記述を解析済み
- [x] 主要概念を抽出済み
- [x] 曖昧点をマーク済み
- [ ] ユーザーシナリオを定義済み
- [x] 要件を生成済み
- [x] エンティティを特定済み
- [ ] レビューチェックリストを通過

---

```
- 該当しないセクションは完全に削除する（"N/A" のまま残さない）
